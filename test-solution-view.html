<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solution View Test - Units & Measurements</title>
    <link rel="stylesheet" href="css/style-optimized.css">
    <link rel="stylesheet" href="css/solution-analysis.css">
</head>
<body>
    <div id="app-container">
        <!-- This will be populated by the view manager -->
    </div>

    <script>
        // Mock some required variables for testing
        window.testQuestions = [
            {
                "id": 1,
                "question": "Which of the following is the SI base unit for mass?",
                "options": ["Gram", "Kilogram", "Pound", "Ounce"],
                "correctIndex": 1,
                "topic": "SI Units",
                "difficulty": "Easy",
                "solution": "The kilogram (kg) is the SI base unit for mass. It is one of the seven fundamental units in the International System of Units."
            },
            {
                "id": 2,
                "question": "The dimensional formula for velocity is:",
                "options": ["[LT⁻¹]", "[ML⁻¹T⁻²]", "[LT⁻²]", "[MLT⁻²]"],
                "correctIndex": 0,
                "topic": "Dimensional Analysis",
                "difficulty": "Medium",
                "solution": "Velocity is displacement per unit time. Displacement has dimension [L] and time has dimension [T], so velocity = [L]/[T] = [LT⁻¹]."
            },
            {
                "id": 3,
                "question": "Which unit is used to measure electric current?",
                "options": ["Volt", "Ampere", "Watt", "Ohm"],
                "correctIndex": 1,
                "topic": "Electric Units",
                "difficulty": "Easy",
                "solution": "The ampere (A) is the SI base unit for electric current. It measures the flow of electric charge per unit time."
            }
        ];

        // Mock answers for testing
        window.mockAnswers = [1, 0, null]; // User answers: Correct, Correct, Unanswered
        window.mockTimeSpent = [45, 60, 0]; // Time spent in seconds
    </script>
    
    <!-- Load all JavaScript modules -->
    <script src="js/utils.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/state-manager.js"></script>
    <script src="js/question-manager.js"></script>
    <script src="js/view-manager.js"></script>
    <script src="js/test-manager.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/adaptive-system.js"></script>
    <script src="js/performance-analytics.js"></script>
    <script src="js/app-main.js"></script>

    <script>
        // Initialize the app for testing
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Create and initialize the app
                const app = new MockTestApp();
                await app.init();
                
                // Mock some state for testing
                if (window.appStorage) {
                    window.appStorage.saveProgress({
                        answers: window.mockAnswers,
                        timeSpent: window.mockTimeSpent,
                        solutionCurrentQ: 0,
                        testStartTime: Date.now() - 180000, // 3 minutes ago
                        isTestActive: false,
                        currentQuestion: 0
                    });
                    window.appStorage.saveCustomQuestions(window.testQuestions);
                    
                    // Mock results through test manager if available
                    if (window.testManager && typeof window.testManager.setMockResults === 'function') {
                        window.testManager.setMockResults({
                            score: 66.67,
                            correct: 2,
                            incorrect: 1,
                            unanswered: 1,
                            totalQuestions: 3
                        });
                    }
                }

                // Show solution view directly for testing
                setTimeout(() => {
                    app.showSolutionsView();
                }, 500);

                console.log('✅ Solution view test initialized successfully');
            } catch (error) {
                console.error('❌ Failed to initialize solution view test:', error);
            }
        });
    </script>
</body>
</html>